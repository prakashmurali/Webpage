
!function(e,t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):e.jQuery)}(this,function(p){"use strict";function s(e){for(var t,o,i,s,n={},r=e.replace(/\s*:\s*/g,":").replace(/\s*,\s*/g,",").split(","),p=0,a=r.length;p<a&&-1===(o=r[p]).search(/^(http|https|ftp):\/\//)&&-1!==o.search(":");p++)t=o.indexOf(":"),i=o.substring(0,t),"string"==typeof(s=(s=o.substring(t+1))||void 0)&&(s="true"===s||"false"!==s&&s),"string"==typeof s&&(s=isNaN(s)?s:+s),n[i]=s;return null==i&&null==s?e:n}function i(e,t,o){if(this.$element=p(e),"string"==typeof t&&(t=s(t)),o?"string"==typeof o&&(o=s(o)):o={},"string"==typeof t)t=t.replace(/\.\w*$/,"");else if("object"==typeof t)for(var i in t)t.hasOwnProperty(i)&&(t[i]=t[i].replace(/\.\w*$/,""));this.settings=p.extend({},n,o),this.path=t,this.init()}var a="vide",n={volume:1,playbackRate:1,muted:!0,loop:!0,autoplay:!0,position:"50% 50%",posterType:"detect",resizing:!0};i.prototype.init=function(){var e,t,o,r=this,i=function(){for(var e,t=(""+r.settings.position).split(/\s+/),o="50%",i="50%",s=0,n=t.length;s<n;s++)"left"===(e=t[s])?o="0%":"right"===e?o="100%":"top"===e?i="0%":"bottom"===e?i="100%":"center"===e?0===s?o="50%":i="50%":0===s?o=e:i=e;return{x:o,y:i}}(),s="";function n(){o(this.src)}r.$wrapper=p("<div>").css({position:"absolute","z-index":-1,top:0,left:0,bottom:0,right:0,overflow:"hidden","-webkit-background-size":"cover","-moz-background-size":"cover","-o-background-size":"cover","background-size":"cover","background-repeat":"no-repeat","background-position":i.x+" "+i.y}),e=r.path,"object"==typeof r.path&&(r.path.poster?e=r.path.poster:r.path.mp4?e=r.path.mp4:r.path.webm?e=r.path.webm:r.path.ogv&&(e=r.path.ogv)),"detect"===r.settings.posterType?(o=function(e){r.$wrapper.css("background-image","url("+e+")")},p('<img src="'+(t=e)+'.gif">').load(n),p('<img src="'+t+'.jpg">').load(n),p('<img src="'+t+'.jpeg">').load(n),p('<img src="'+t+'.png">').load(n)):"none"!==r.settings.posterType&&r.$wrapper.css("background-image","url("+e+"."+r.settings.posterType+")"),"static"===r.$element.css("position")&&r.$element.css("position","relative"),r.$element.prepend(r.$wrapper),"object"==typeof r.path?(r.path.mp4&&(s+='<source src="'+r.path.mp4+'.mp4" type="video/mp4">'),r.path.webm&&(s+='<source src="'+r.path.webm+'.webm" type="video/webm">'),r.path.ogv&&(s+='<source src="'+r.path.ogv+'.ogv" type="video/ogv">'),r.$video=p("<video>"+s+"</video>")):r.$video=p('<video><source src="'+r.path+'.mp4" type="video/mp4"><source src="'+r.path+'.webm" type="video/webm"><source src="'+r.path+'.ogv" type="video/ogg"></video>'),r.$video.prop({autoplay:r.settings.autoplay,loop:r.settings.loop,volume:r.settings.volume,muted:r.settings.muted,defaultMuted:r.settings.muted,playbackRate:r.settings.playbackRate,defaultPlaybackRate:r.settings.playbackRate}).css({margin:"auto",position:"absolute","z-index":-1,top:i.y,left:i.x,"-webkit-transform":"translate(-"+i.x+", -"+i.y+")","-ms-transform":"translate(-"+i.x+", -"+i.y+")","-moz-transform":"translate(-"+i.x+", -"+i.y+")",transform:"translate(-"+i.x+", -"+i.y+")",visibility:"hidden"}).one("canplaythrough."+a,function(){r.resize()}).one("playing."+a,function(){r.$video.css("visibility","visible"),r.$wrapper.css("background-image","none")}),r.$element.on("resize."+a,function(){r.settings.resizing&&r.resize()}),r.$wrapper.append(r.$video)},i.prototype.getVideoObject=function(){return this.$video[0]},i.prototype.resize=function(){var e,t,o,i;this.$video&&(e=this.$video[0].videoHeight,t=this.$video[0].videoWidth,o=this.$wrapper.height(),i=this.$wrapper.width(),this.$video.css(o/e<i/t?{width:i+2,height:"auto"}:{width:"auto",height:o+2}))},i.prototype.destroy=function(){this.$element.off(a),this.$video&&this.$video.off(a),delete p[a].lookup[this.index],this.$element.removeData(a),this.$wrapper.remove()},p[a]={lookup:[]},p.fn[a]=function(e,t){var o;return this.each(function(){(o=p.data(this,a))&&o.destroy(),(o=new i(this,e,t)).index=p[a].lookup.push(o)-1,p.data(this,a,o)}),this},p(document).ready(function(){var e=p(window);e.on("resize."+a,function(){for(var e,t=p[a].lookup.length,o=0;o<t;o++)(e=p[a].lookup[o])&&e.settings.resizing&&e.resize()}),e.on("unload."+a,function(){return!1}),p(document).find("[data-vide-bg]").each(function(e,t){var o=p(t),i=o.data(a+"-options"),s=o.data(a+"-bg");o[a](s,i)})})});

